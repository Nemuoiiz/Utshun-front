import{ak as k,v as y,c as V,S as g,U as l,a3 as r,L as s,Z as i,X as n,P as v,ao as x,_ as u,ar as b}from"./index-T_veDYvW.js";import{b as d}from"./route-block-B_A1xBdJ.js";import{V as h,a as m}from"./VRow--F2gg7ax.js";import{V as D}from"./VDivider-Dd8ZUdqV.js";import{V as w}from"./VDataTable-CCsbPxU5.js";import{V as A}from"./VContainer-Db2pSK1w.js";import"./VPagination-5qtbMg1l.js";import"./VList-Dnkf20Zl.js";import"./ssrBoot-BkOSUpkK.js";import"./VMenu-CK3nCrnx.js";const B={__name:"orders",setup(S){const{apiAuth:p}=b(),f=k(),c=y([]),_=V(()=>[{title:"訂單ID",key:"_id"},{title:"會員帳號",key:"user.account"},{title:"訂單時間",key:"createdAt",value:t=>new Date(t.createdAt).toLocaleString()},{title:"商品",key:"cart",sortable:!1},{title:"訂單金額",key:"price",value:t=>t.cart.reduce((a,e)=>a+e.product.price*e.quantity,0)}]);return(async()=>{var t,a;try{const{data:e}=await p.get("/order/all");c.value=e.result}catch(e){console.log(e),f({text:((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.message)||"未知錯誤",snackbarProps:{color:"red"}})}})(),(t,a)=>(l(),g(A,null,{default:r(()=>[s(h,null,{default:r(()=>[s(m,{cols:"12"},{default:r(()=>a[0]||(a[0]=[i("h1",{class:"text-center"},"訂單系統",-1)])),_:1}),s(D),s(m,{cols:"12"},{default:r(()=>[s(w,{items:c.value,headers:_.value},{"item.cart":r(e=>[i("ul",null,[(l(!0),n(v,null,x(e.item.cart,o=>(l(),n("li",{key:o._id},u(o.product.name)+" x "+u(o.quantity),1))),128))])]),_:2},1032,["items","headers"])]),_:1})]),_:1})]),_:1}))}};typeof d=="function"&&d(B);export{B as default};
