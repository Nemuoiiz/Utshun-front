import{p as M,v as Y,s as _,c as f,a7 as X,w as A,o as $,b as j,g as q,q as W,u as J,y as G,t as R,A as O,L as l,M as E,F as K,d as Q,j as Z,m as ee,a8 as te,a9 as ae,aa as le,ab as oe,ac as se,ad as ne,B as re,D as ue,E as ie,ae as de,J as ce,af as ve,ag as fe,ah as me,ai as ge,aj as T,a1 as be,a2 as ye,ak as he,S as x,al as Se,a4 as ke,U as g,a3 as o,X as P,am as p,a5 as b,an as D,P as H,ao as Ve,Y as C,_ as Be,a6 as V,ap as pe,aq as xe,ar as Ce}from"./index-T_veDYvW.js";import{V as F,m as _e}from"./VToolbar-BYqIWujZ.js";import{u as Te}from"./ssrBoot-BkOSUpkK.js";import{V as we}from"./VContainer-Db2pSK1w.js";import{V as Le}from"./VMenu-CK3nCrnx.js";import{V as Pe,a as N}from"./VList-Dnkf20Zl.js";import{V as Ie}from"./VMain-Bb8r5onU.js";import"./VDivider-Dd8ZUdqV.js";const Ae=M({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function He(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:y}=r;let h=0,c=0;const a=Y(null),d=_(0),i=_(0),t=_(0),S=_(!1),s=_(!1),v=f(()=>Number(e.scrollThreshold)),w=f(()=>X((v.value-d.value)/v.value||0)),k=()=>{const u=a.value;if(!u||y&&!y.value)return;h=d.value,d.value="window"in u?u.pageYOffset:u.scrollTop;const m=u instanceof Window?document.documentElement.scrollHeight:u.scrollHeight;if(c!==m){c=m;return}s.value=d.value<h,t.value=Math.abs(d.value-v.value)};return A(s,()=>{i.value=i.value||d.value}),A(S,()=>{i.value=0}),$(()=>{A(()=>e.scrollTarget,u=>{var B;const m=u?document.querySelector(u):window;m&&m!==a.value&&((B=a.value)==null||B.removeEventListener("scroll",k),a.value=m,a.value.addEventListener("scroll",k,{passive:!0}))},{immediate:!0})}),j(()=>{var u;(u=a.value)==null||u.removeEventListener("scroll",k)}),y&&A(y,k,{immediate:!0}),{scrollThreshold:v,currentScroll:d,currentThreshold:t,isScrollActive:S,scrollRatio:w,isScrollingUp:s,savedScroll:i}}const Ne=M({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},..._e(),...K(),...Ae(),height:{type:[Number,String],default:64}},"VAppBar"),Re=q()({name:"VAppBar",props:Ne(),emits:{"update:modelValue":e=>!0},setup(e,r){let{slots:y}=r;const h=Y(),c=W(e,"modelValue"),a=f(()=>{var L;const n=new Set(((L=e.scrollBehavior)==null?void 0:L.split(" "))??[]);return{hide:n.has("hide"),fullyHide:n.has("fully-hide"),inverted:n.has("inverted"),collapse:n.has("collapse"),elevate:n.has("elevate"),fadeImage:n.has("fade-image")}}),d=f(()=>{const n=a.value;return n.hide||n.fullyHide||n.inverted||n.collapse||n.elevate||n.fadeImage||!c.value}),{currentScroll:i,scrollThreshold:t,isScrollingUp:S,scrollRatio:s}=He(e,{canScroll:d}),v=f(()=>a.value.hide||a.value.fullyHide),w=f(()=>e.collapse||a.value.collapse&&(a.value.inverted?s.value>0:s.value===0)),k=f(()=>e.flat||a.value.fullyHide&&!c.value||a.value.elevate&&(a.value.inverted?i.value>0:i.value===0)),u=f(()=>a.value.fadeImage?a.value.inverted?1-s.value:s.value:void 0),m=f(()=>{var U,z;if(a.value.hide&&a.value.inverted)return 0;const n=((U=h.value)==null?void 0:U.contentHeight)??0,L=((z=h.value)==null?void 0:z.extensionHeight)??0;return v.value?i.value<t.value||a.value.fullyHide?n+L:n:n+L});J(f(()=>!!e.scrollBehavior),()=>{Q(()=>{v.value?a.value.inverted?c.value=i.value>t.value:c.value=S.value||i.value<t.value:c.value=!0})});const{ssrBootStyles:B}=Te(),{layoutItemStyles:I}=G({id:e.name,order:f(()=>parseInt(e.order,10)),position:R(e,"location"),layoutSize:m,elementSize:_(void 0),active:c,absolute:R(e,"absolute")});return O(()=>{const n=F.filterProps(e);return l(F,E({ref:h,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...I.value,"--v-toolbar-image-opacity":u.value,height:void 0,...B.value},e.style]},n,{collapse:w.value,flat:k.value}),y)}),{}}}),Ee=M({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ve,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ce(),...de({location:"top end"}),...ie(),...ue(),...re(),...ne({transition:"scale-rotate-transition"})},"VBadge"),Me=q()({name:"VBadge",inheritAttrs:!1,props:Ee(),setup(e,r){const{backgroundColorClasses:y,backgroundColorStyles:h}=Z(R(e,"color")),{roundedClasses:c}=ee(e),{t:a}=te(),{textColorClasses:d,textColorStyles:i}=ae(R(e,"textColor")),{themeClasses:t}=le(),{locationStyles:S}=oe(e,!0,s=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(s)?+(e.offsetY??0):["left","right"].includes(s)?+(e.offsetX??0):0));return O(()=>{const s=Number(e.content),v=!e.max||isNaN(s)?e.content:s<=+e.max?s:`${e.max}+`,[w,k]=se(r.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(e.tag,E({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},k,{style:e.style}),{default:()=>{var u,m;return[l("div",{class:"v-badge__wrapper"},[(m=(u=r.slots).default)==null?void 0:m.call(u),l(fe,{transition:e.transition},{default:()=>{var B,I;return[me(l("span",E({class:["v-badge__badge",t.value,y.value,c.value,d.value],style:[h.value,i.value,e.inline?{}:S.value],"aria-atomic":"true","aria-label":a(e.label,s),"aria-live":"polite",role:"status"},w),[e.dot?void 0:r.slots.badge?(I=(B=r.slots).badge)==null?void 0:I.call(B):e.icon?l(T,{icon:e.icon},null):v]),[[ge,e.modelValue]])]}})])]}})}),{}}}),Ue={key:0,class:"nav-divider"},ze={__name:"default",setup(e){const r=ye(),{apiAuth:y}=Ce(),h=he(),c=Se(),a=f(()=>[{to:"/about",text:"About"},{to:"/products",text:"Product"},{to:"/activity",text:"Activity"},{to:"/donation",text:"Donation"}]),d=async()=>{try{await y.delete("/user/logout")}catch(i){console.log(i)}r.logout(),h({text:"登出成功",snackbarProps:{color:"green"}}),c.push("/")};return(i,t)=>{const S=ke("router-view");return g(),x(xe,{style:{"background-color":"#eee8df","font-family":"'Croissant One', seri"}},{default:o(()=>[l(Re,{elevation:"4",color:"rgba(159, 190, 155, 0.6)",class:"floating",height:"100","scroll-behavior":"elevate"},{default:o(()=>[l(we,{class:"d-flex align-center",style:{height:"100%"}},{default:o(()=>[l(p,{to:"/",active:!1,style:{"font-size":"30px","text-transform":"none"}},{default:o(()=>t[0]||(t[0]=[b("U-tshun")])),_:1}),l(D),(g(!0),P(H,null,Ve(a.value,(s,v)=>(g(),P(H,{key:s.to},[l(p,{to:s.to,class:"nav-btn"},{default:o(()=>[b(Be(s.text),1)]),_:2},1032,["to"]),v<a.value.length-1?(g(),P("span",Ue,"｜")):C("",!0)],64))),128)),l(D),V(r).isLoggedIn&&V(r).isAdmin?(g(),P(H,{key:0},[l(p,{to:"/admin",icon:""},{default:o(()=>[l(T,null,{default:o(()=>t[1]||(t[1]=[b("mdi-cog")])),_:1})]),_:1}),l(p,{icon:"",onClick:d},{default:o(()=>[l(T,null,{default:o(()=>t[2]||(t[2]=[b("mdi-logout")])),_:1})]),_:1})],64)):(g(),P(H,{key:1},[l(p,{icon:""},{default:o(()=>[l(T,null,{default:o(()=>t[3]||(t[3]=[b("mdi-heart")])),_:1})]),_:1}),l(p,{to:"/cart",icon:""},{default:o(()=>[l(T,null,{default:o(()=>t[4]||(t[4]=[b("mdi-cart")])),_:1}),V(r).cart?(g(),x(Me,{key:0,content:V(r).cart,floating:"",color:"red"},null,8,["content"])):C("",!0)]),_:1}),l(Le,null,{activator:o(({props:s})=>[l(p,E(s,{icon:""}),{default:o(()=>[l(T,null,{default:o(()=>t[5]||(t[5]=[b("mdi-account")])),_:1})]),_:2},1040)]),default:o(()=>[l(Pe,{style:{"font-size":"16px","font-family":"'Croissant One', seri"}},{default:o(()=>[V(r).isLoggedIn?C("",!0):(g(),x(N,{key:0,to:"/login"},{default:o(()=>t[6]||(t[6]=[b("Login")])),_:1})),V(r).isLoggedIn?C("",!0):(g(),x(N,{key:1,to:"/register"},{default:o(()=>t[7]||(t[7]=[b("Register")])),_:1})),V(r).isLoggedIn?(g(),x(N,{key:2,to:"/orders"},{default:o(()=>t[8]||(t[8]=[b("User orders")])),_:1})):C("",!0),V(r).isLoggedIn?(g(),x(N,{key:3,onClick:d},{default:o(()=>t[9]||(t[9]=[b("logout")])),_:1})):C("",!0)]),_:1})]),_:1})],64))]),_:1})]),_:1}),l(Ie,{class:pe({"no-padding":i.$route.meta.title==="首頁"})},{default:o(()=>[l(S)]),_:1},8,["class"])]),_:1})}}},We=be(ze,[["__scopeId","data-v-1bea7eee"]]);export{We as default};
