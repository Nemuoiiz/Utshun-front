import{ak as C,ar as h,S as M,U,a3 as l,L as o,Z as g,aO as B,a6 as a,aN as n,am as F,a5 as N}from"./index-C1Wq3k6J.js";import{c as _,a as u,f as q,u as A,e as m}from"./index.esm-DLt04wSt.js";import{v}from"./index-DV14HKND.js";import{V as $,a as b,b as w}from"./route-block-CQ7mDXys.js";import{V as E}from"./VDivider-BkKwZ4LZ.js";import{V as O}from"./VForm-Ca6y0Dak.js";import{V as P}from"./VContainer-fQhPXwuc.js";const T={class:"text-center"},j={__name:"register",setup(D){const{api:x}=h(),f=C(),y=_({account:u().required("帳號必填").min(4,"帳號長度不足").max(20,"帳號長度超出限制").test("isAlphanumeric","帳號格式不符",r=>v.isAlphanumeric(r)),email:u().required("信箱必填").test("isEmail","信箱格式不符",r=>v.isEmail(r)),password:u().required("密碼必填").min(4,"密碼長度不足").max(20,"密碼長度超出限制"),passwordConfirm:u().oneOf([q("password")],"密碼不符")}),{handleSubmit:k,isSubmitting:V}=A({validationSchema:y}),i=m("account"),d=m("email"),p=m("password"),c=m("passwordConfirm"),S=k(async r=>{var e,s;try{await x.post("/user",{account:r.account,email:r.email,password:r.password}),f({text:"註冊成功",snackbarProps:{color:"green"}})}catch(t){console.log(t),f({text:((s=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:s.message)||"發生未知錯誤",snackbarProps:{color:"red"}})}});return(r,e)=>(U(),M(P,null,{default:l(()=>[o($,{justify:"center"},{default:l(()=>[o(b,{cols:"12"},{default:l(()=>e[4]||(e[4]=[g("h1",{class:"text-center"},"註冊帳號",-1)])),_:1}),o(E),o(b,{cols:"6"},{default:l(()=>[o(O,{disabled:a(V),onSubmit:B(a(S),["prevent"])},{default:l(()=>[o(n,{modelValue:a(i).value.value,"onUpdate:modelValue":e[0]||(e[0]=s=>a(i).value.value=s),"error-messages":a(i).errorMessage.value,label:"帳號",minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages"]),o(n,{modelValue:a(p).value.value,"onUpdate:modelValue":e[1]||(e[1]=s=>a(p).value.value=s),type:"password","error-messages":a(p).errorMessage.value,label:"密碼",minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages"]),o(n,{modelValue:a(c).value.value,"onUpdate:modelValue":e[2]||(e[2]=s=>a(c).value.value=s),type:"password","error-messages":a(c).errorMessage.value,label:"確認密碼",minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages"]),o(n,{modelValue:a(d).value.value,"onUpdate:modelValue":e[3]||(e[3]=s=>a(d).value.value=s),"error-messages":a(d).errorMessage.value,label:"信箱"},null,8,["modelValue","error-messages"]),g("div",T,[o(F,{loading:a(V),type:"submit",color:"primary"},{default:l(()=>e[5]||(e[5]=[N("建立帳號")])),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof w=="function"&&w(j);export{j as default};
